language: c

sudo: false

os:
  - osx
  - linux

env:
  global:
    - RACKET_DIR=~/racket
  matrix:
    - RACKET_VERSION=7.0

matrix:
  fast_finish: true

before_install:
  - git clone https://github.com/agiardina/travis-racket.git
  - cat travis-racket/install-racket.sh | bash # pipe to bash not sh!
  - export PATH="${RACKET_DIR}/bin:${PATH}" #install-racket.sh can't set for us

install:

before_script:
  - mkdir build

# Here supply steps such as raco make, raco test, etc.
script:
  - raco pkg install --batch --deps search-auto charterm
  - raco exe -o build/git-cdflow src/git-cdflow.rkt
  - raco exe -o build/git-cdflow-parent src/git-cdflow-parent.rkt
  - raco exe -o build/git-cdflow-release src/git-cdflow-release.rkt
  - raco exe -o build/git-cdflow-feature src/git-cdflow-feature.rkt
  - raco exe -o build/git-cdflow-issue src/git-cdflow-issue.rkt
  - raco exe -o build/git-cdflow-tree src/git-cdflow-tree.rkt
  - raco distribute git-cdflow build/git-cdflow build/git-cdflow-parent build/git-cdflow-release build/git-cdflow-feature build/git-cdflow-issue build/git-cdflow-tree

after_script: